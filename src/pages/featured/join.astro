---
import Layout from "../../layouts/Layout.astro";

---

<Layout title="Feature Your Tool">
  <main>
    <div class="fixed inset-0 flex justify-center items-center" aria-hidden="true">
      <div class="bg-[#BCB1E7]/30 h-[70vh] w-[70vh] rounded-full blur-[150px]"></div>
    </div>

    <div class="relative flex flex-col items-center justify-center min-h-[100dvh] px-4 sm:px-8 pt-24 sm:pt-32 pb-16">
      <div class="absolute inset-0 bg-gradient-to-b from-transparent to-black/20 pointer-events-none"></div>

      <h1 class="text-4xl sm:text-5xl md:text-6xl font-semibold text-white tracking-tighter mt-6 text-balance text-center">
        Feature Your AI Tool
      </h1>

      <h2 class="mt-4 mb-8 max-w-xl text-center text-base sm:text-lg text-white/80 leading-relaxed text-balance px-4">
        Submit your project for consideration in our featured section. Showcase your tool to thousands of AI developers and enthusiasts.
      </h2>

      <div id="form-error" class="w-full max-w-xl mb-6" style="display:none;">
        <div class="bg-red-500/10 border border-red-500/20 text-red-200 px-4 py-3 rounded-lg"></div>
      </div>
      <div id="form-success" class="w-full max-w-xl mb-6" style="display:none;">
        <div class="bg-green-500/10 border border-green-500/20 text-green-200 px-4 py-3 rounded-lg">Application submitted successfully! Redirecting...</div>
      </div>

      <form id="featured-signup-form" autocomplete="off" class="w-full max-w-xl bg-white/10 backdrop-blur-md rounded-xl p-6 sm:p-8 border border-white/10">
        <div class="space-y-4">
          <div class="flex gap-4 flex-col sm:flex-row">
            <div class="flex-1">
              <label for="name" class="block text-sm font-medium text-white mb-2">Your Name</label>
              <input
                type="text"
                id="name"
                name="name"
                required
                class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50"
                placeholder="John Doe"
              />
            </div>
            <div class="flex-1">
              <label for="email" class="block text-sm font-medium text-white mb-2">Your Email</label>
              <input
                type="email"
                id="email"
                name="email"
                required
                class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50"
                placeholder="your@email.com"
              />
            </div>
          </div>

          <div>
            <label for="tool_name" class="block text-sm font-medium text-white mb-2">Tool Name</label>
            <input
              type="text"
              id="tool_name"
              name="tool_name"
              required
              class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50"
              placeholder="Your tool's official name"
            />
          </div>

          <div class="flex gap-4 flex-col sm:flex-row">
            <div class="flex-1">
              <label for="github" class="block text-sm font-medium text-white mb-2">GitHub URL</label>
              <input
                type="url"
                id="github"
                name="github"
                required
                class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50"
                placeholder="https://github.com/your-project"
              />
            </div>
            <div class="flex-1">
              <label for="website" class="block text-sm font-medium text-white mb-2">Website</label>
              <input
                type="url"
                id="website"
                name="website"
                class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50"
                placeholder="https://your-tool.com"
              />
            </div>
          </div>

          <div class="flex gap-4 flex-col sm:flex-row">
            <div class="flex-1">
              <label for="contact_email" class="block text-sm font-medium text-white mb-2">Contact Email</label>
              <input
                type="email"
                id="contact_email"
                name="contact_email"
                class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50"
                placeholder="contact@your-tool.com"
              />
            </div>
            <div class="flex-1">
              <label for="social" class="block text-sm font-medium text-white mb-2">Social Media</label>
              <input
                type="text"
                id="social"
                name="social"
                class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50"
                placeholder="Twitter/LinkedIn handles"
              />
            </div>
          </div>

          <div>
            <label for="objective" class="block text-sm font-medium text-white mb-2">Tool Objective</label>
            <textarea
              id="objective"
              name="objective"
              required
              rows="3"
              class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 resize-none"
              placeholder="Briefly describe the purpose and functionality of your tool"
            ></textarea>
          </div>

          <div>
            <label for="tags" class="block text-sm font-medium text-white mb-2">Tool Tags</label>
            <input
              type="text"
              id="tags"
              name="tags"
              class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50"
              placeholder="Comma-separated tags (e.g., AI, ML, NLP, Computer Vision)"
            />
          </div>

          <div class="flex gap-4 flex-col sm:flex-row">
            <div class="flex-1">
              <label for="category" class="block text-sm font-medium text-white mb-2">Category</label>
              <select
                id="category"
                name="category"
                required
                class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/50"
              >
                <option value="" disabled selected class="bg-[#080808]">Select category</option>
                <option value="Machine Learning" class="bg-[#080808]">Machine Learning</option>
                <option value="Natural Language Processing" class="bg-[#080808]">NLP</option>
                <option value="Computer Vision" class="bg-[#080808]">Computer Vision</option>
                <option value="Data Analysis" class="bg-[#080808]">Data Analysis</option>
                <option value="Developer Tools" class="bg-[#080808]">Developer Tools</option>
                <option value="Other" class="bg-[#080808]">Other</option>
              </select>
            </div>
            <div class="flex-1">
              <label for="audience" class="block text-sm font-medium text-white mb-2">Target Audience</label>
              <select
                id="audience"
                name="audience"
                required
                class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white focus:outline-none focus:ring-2 focus:ring-white/50"
              >
                <option value="" disabled selected class="bg-[#080808]">Select audience</option>
                <option value="Developers" class="bg-[#080808]">Developers</option>
                <option value="Researchers" class="bg-[#080808]">Researchers</option>
                <option value="Businesses" class="bg-[#080808]">Businesses</option>
                <option value="Students" class="bg-[#080808]">Students</option>
                <option value="General Public" class="bg-[#080808]">General Public</option>
              </select>
            </div>
          </div>

          <div>
            <label for="metrics" class="block text-sm font-medium text-white mb-2">Key Metrics</label>
            <input
              type="text"
              id="metrics"
              name="metrics"
              required
              class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50"
              placeholder="Monthly users, downloads, or other metrics"
            />
          </div>

          <div>
            <label for="testimonials" class="block text-sm font-medium text-white mb-2">User Testimonials</label>
            <textarea
              id="testimonials"
              name="testimonials"
              rows="3"
              class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 resize-none"
              placeholder="Paste user testimonials or reviews (if available)"
            ></textarea>
            <p class="text-xs text-white/50">Optional</p>
          </div>

          <div>
            <label for="reason" class="block text-sm font-medium text-white mb-2">Why Should We Feature Your Tool?</label>
            <textarea
              id="reason"
              name="reason"
              rows="3"
              class="w-full px-4 py-2 bg-white/10 border border-white/20 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-white/50 resize-none"
              placeholder="Explain what makes your tool unique and valuable to our community"
            ></textarea>
          </div>

          <div class="space-y-2">
            <div class="flex items-center gap-3">
              <input
                type="checkbox"
                id="financial_interest"
                name="financial_interest"
                value="yes"
                class="w-4 h-4 rounded border-white/20 bg-white/10 text-white focus:ring-2 focus:ring-white/50"
              />
              <label for="financial_interest" class="text-sm text-white/80">
                I'm interested in financially supporting the featuring of this tool
              </label>
            </div>
            <div class="flex items-center gap-3">
              <input
                type="checkbox"
                id="updates"
                name="updates"
                value="yes"
                class="w-4 h-4 rounded border-white/20 bg-white/10 text-white focus:ring-2 focus:ring-white/50"
              />
              <label for="updates" class="text-sm text-white/80">
                Receive platform updates and featuring opportunities
              </label>
            </div>
          </div>

          <input
            type="text"
            name="trap_field"
            style="display: none;"
            tabindex="-1"
            autocomplete="off"
          />

          <button
            type="submit"
            class="w-full font-semibold shrink-0 h-11 sm:h-12 px-5 sm:px-6 flex items-center justify-center gap-2 rounded-full bg-white text-[#080808] hover:bg-white/90 transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-white/50 shadow-lg border border-black/10"
          >
            Submit for Featuring
            <svg
              xmlns="http://www.w3.org/2000/svg"
              width="20"
              height="20"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
              stroke-linecap="round"
              stroke-linejoin="round"
            >
              <path d="M5 12h14"></path>
              <path d="m12 5 7 7-7 7"></path>
            </svg>
          </button>
        </div>
      </form>

      <script type="module">
        const form = document.getElementById('featured-signup-form');
        const errorDiv = document.getElementById('form-error');
        const successDiv = document.getElementById('form-success');
        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          errorDiv.style.display = 'none';
          successDiv.style.display = 'none';
          const formData = new FormData(form);
          form.querySelector('[type="submit"]').disabled = true;
          form.querySelector('[type="submit"]').innerText = 'Sending...';
          try {
            const res = await fetch('/api/featured-signup', { method: 'POST', body: formData });
            const data = await res.json();
            if (!res.ok) {
              errorDiv.style.display = '';
              errorDiv.querySelector('div').textContent = data.error || 'There was an error submitting your request.';
              form.querySelector('[type="submit"]').disabled = false;
              form.querySelector('[type="submit"]').innerText = 'Submit for Featuring';
              return;
            }
            successDiv.style.display = '';
            setTimeout(() => {
              window.location.href = '/featured/success';
            }, 1200);
          } catch (err) {
            errorDiv.style.display = '';
            errorDiv.querySelector('div').textContent = 'There was an error submitting your request.';
            form.querySelector('[type="submit"]').disabled = false;
            form.querySelector('[type="submit"]').innerText = 'Submit for Featuring';
          }
        });
      </script>
    </div>
  </main>
</Layout>